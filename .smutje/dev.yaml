---
version: 1
service:
  name: '{{ env "bamboo_deploy_environment" }}-{{ env "bamboo_shortPlanName" }}'
  shortname: ""
  owner: lab
deployment:
  strategy: blueGreen
health:
  delayseconds: 240
  path: "/"
  port: 8989
args:
  - "-pg"
  - "/data/graphdata/europe-latest.osm-gh"
  - "-dp"
  - "s3://lab-graphhopper-graphdata-prod/europe-latest.osm-gh.gz"
ports:
  - 8989
limits:
  cpu: 2
  memory: 24576
ingress:
  hosts:
    - host: 'api-graphhopper-{{ env "bamboo_deploy_environment" }}.{{ env "bamboo_deploy_host" }}'
      public: false
